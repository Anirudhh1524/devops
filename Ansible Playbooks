1. Java - 21

- name: Install Java 21
  hosts: all
  become: yes
  tasks:
    - name: Install Java on Ubuntu/Debian
      apt:
        name: openjdk-21-jdk
        state: present
        update_cache: yes
      when: ansible_os_family == "Debian"

    - name: Install Java on RedHat/CentOS
      yum:
        name: java-21-openjdk-devel
        state: present
      when: ansible_os_family == "RedHat"


2. git

- name: Install Git
  hosts: all
  become: yes
  tasks:
    - name: Install Git on Ubuntu/Debian
      apt:
        name: git
        state: present
        update_cache: yes
      when: ansible_os_family == "Debian"

    - name: Install Git on RedHat/CentOS
      yum:
        name: git
        state: present
      when: ansible_os_family == "RedHat"


3. Nginx

- hosts: all
  become: yes
  tasks:
    - name: update
      apt: update_cache=yes
    - name: Install Nginx
      apt: name=nginx state=latest
      notify:
        - restart nginx
  handlers:
    - name: restart nginx
      service: name=nginx state=reloaded


4.copy files

---
- name: Copy a file to remote host
  hosts: all
  tasks:
    - name: Copy nginx config
      ansible.builtin.copy:
        src: /local/path/nginx.conf
        dest: /etc/nginx/nginx.conf
        owner: root
        group: root
        mode: '0644'


5. Fixed reusable Format For All Packeges

---
- name: Install a package on Ubuntu
  hosts: all
  become: yes
  vars:
    package_name: git
  tasks:
    - name: Update apt cache
      apt:
        update_cache: yes
    - name: Install the package "{{ git }}"
      apt:
        name: "{{ git }}"
        state: latest


6. Using Role create Playbook (format)

---
- hosts: webservers               (eg. all/ipadress/localost) #whatever
  become: yes
  roles:
    - nginx_setup                 ( give existing role name in system then Save & Run )


7. create ansible-role 

---
- name: Install Nginx
  apt:
    name: nginx
    state: present
  notify: Restart Nginx        #tasks/main.yaml    
- name: Restart Nginx
  service:
    name: nginx
    state: restarted         #handleres/main.yaml
- hosts: webservers
  become: yes
  roles:
    - my_role_name          #use role in playbook


8. fixed reusable format for role

package_name: __________               #defaults/main.yaml
- name: Install {{ package_name }}   
  apt:
    name: "{{ package_name }}"
    state: present                    #tasks/main.yaml
- hosts: all
  become: yes
  roles:
    - role: package_installer
      vars:
        package_name: ____            # run playbook

**Patch Installations**  

Two Main Approaches

1. Apply a Patch File (Code/File Changes)
If you have a `.patch` file (created with `diff`), Ansible provides the `ansible.posix.patch` module:

- name: Apply patch to source code
  ansible.posix.patch:
    src: /tmp/myfix.patch   # Path to patch file
    dest: /opt/myapp/file.c # File or directory to patch
    strip: 1                # Number of leading components to strip


- `src` → Path to the patch file.
- `dest` → Target file/directory where patch should be applied.
- `strip` → Controls how many leading path components are removed (like `patch -pN`).

This is useful for **source code fixes, configuration changes, or custom patches**.

2. System/OS Patching (Security Updates)
For Linux servers, you can automate patching by using Ansible’s package modules (`yum`, `dnf`, `apt`) in a playbook:

Example for RHEL/CentOS:

- name: Apply all available updates
  hosts: all
  become: yes
  tasks:
    - name: Update all packages
      yum:
        name: '*'
        state: latest


Example for Ubuntu/Debian:

- name: Apply all available updates
  hosts: all
  become: yes
  tasks:
    - name: Update all packages
      apt:
        upgrade: dist
        update_cache: yes





