Blue-Green and Canary deployments are **strategies used in software release management** to reduce downtime and risk when deploying new versions of applications. 

 ðŸ”µðŸŸ¢ Blue-Green Deployment

Concept:
Maintain two identical environments â€” **Blue** (current production) 
                                      **Green** (new version).

- **How it works:**
  - Blue is live and serving users.
  - Green is updated with the new version and tested.
  - Once verified, traffic is switched from Blue to Green.
  - If issues arise, rollback is easy by switching back to Blue.

- **Benefits:**
  - Zero downtime
  - Easy rollback
  - Safe testing in production-like environment

- **Use case:** 
Ideal for major updates where you want full control over switching environments.



ðŸ¤ Canary Deployment

**Concept:** Gradually roll out the new version to a small subset of users before full deployment.

- **How it works:**
  - A small percentage of users (the "canaries") get the new version.
  - Monitor performance, errors, and user feedback.
  - If stable, increase rollout to more users until full deployment.
  - If problems occur, rollback affects only a small group.

- **Benefits:**
  - Early detection of issues
  - Controlled risk
  - Real-world testing with real users

- **Use case:**
Perfect for frequent updates or when you want to test new features incrementally.

### ðŸ§  Quick Comparison

| Feature             | Blue-Green Deployment | Canary Deployment       |
|---------------------|------------------------|--------------------------|
| Rollout Style       | All-at-once switch     | Gradual rollout          |
| Risk Level          | Low (easy rollback)    | Very low (small exposure)|
| Infrastructure Need | Two full environments  | One environment with routing logic |
| Monitoring          | Before switch          | During rollout           |


âœ… 1. CI Pipeline Example (Continuous Integration)

Declarative CI Pipeline (Jenkinsfile)

pipeline {
    agent any

    stages {

        stage('Checkout Code') {
            steps {
                git branch: 'main', url: 'https://github.com/your-repo/project.git'
            }
        }

        stage('Install Dependencies') {
            steps {
                sh 'mvn clean install -DskipTests=true'
            }
        }

        stage('Run Unit Tests') {
            steps {
                sh 'mvn test'
            }
        }

        stage('Build Artifact') {
            steps {
                sh 'mvn package'
            }
        }
    }

    post {
        success {
            echo "CI Pipeline completed successfully!"
        }
        failure {
            echo "CI Pipeline failed!"
        }
    }
}


âœ… 2. CD Pipeline Example (Continuous Deployment/Delivery)

Declarative CD Pipeline (Deploy to server using SSH)

pipeline {
    agent any

    stages {

        stage('Download Artifact') {
            steps {
                sh 'wget http://jenkins-server/artifacts/app.jar -O app.jar'
            }
        }

        stage('Stop Existing Application') {
            steps {
                sh 'ssh ubuntu@10.0.0.5 "pkill -f app.jar || true"'
            }
        }

        stage('Deploy New Version') {
            steps {
                sh 'scp app.jar ubuntu@10.0.0.5:/opt/app/app.jar'
            }
        }

        stage('Start Application') {
            steps {
                sh 'ssh ubuntu@10.0.0.5 "nohup java -jar /opt/app/app.jar > app.log 2>&1 &"'
            }
        }
    }

    post {
        success {
            echo "CD Deployment Successful!"
        }
        failure {
            echo "CD Deployment Failed!"
        }
    }
}



ðŸ”„ 3. Combined CI/CD Pipeline (End-to-End)

If you want both CI + CD in one Jenkinsfile:

pipeline {
    agent any

    stages {

        stage('Checkout') {
            steps {
                git url: 'https://github.com/your-repo/project.git'
            }
        }

        stage('Build') {
            steps {
                sh 'mvn clean package'
            }
        }

        stage('Test') {
            steps {
                sh 'mvn test'
            }
        }

        stage('Deploy to Dev') {
            steps {
                sh 'scp target/app.jar ubuntu@10.0.0.5:/opt/app/'
                sh 'ssh ubuntu@10.0.0.5 "systemctl restart myapp"'
            }
        }
    }
}



